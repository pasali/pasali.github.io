<!DOCTYPE html>
<html class="no-js">

  <head>
	<meta charset="utf-8">
	<title>Android - NetworkOnMainThreadException | Mehmet Başal</title>
	<meta name="description" content="Eğer network işlemleri yapan bir android uygulaması geliştiriyorsanız, büyük ihtimal ile yukarıda başlıkta yazdığım hata ile karşılaşmıssınızdır. &lt;!-- mor...">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- CSS -->
	<link rel="stylesheet" href="/css/main.css">
	
	<!--Favicon-->
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	
	<!-- Canonical -->
	<link rel="canonical" href="http://pasali.me/2014/01/29/android-networkonmainthreadexception.html">
	
	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Mehmet Başal" href="http://pasali.me/feed.xml" />
	
	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	
	<!-- Google Fonts -->
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	
	<!-- Google Analytics -->
	
</head>


  <body>
    <header class="site-header">

	<div class="branding">
		
		<img class="avatar" src="/img/avatar.png" alt=""/>
		
		
		<h1 class="site-title">
			<a href="/">Mehmet Başal</a>
		</h1>
	</div>
	
	<nav class="site-nav">
		<ul>
			
				
			
				
				<li>
					<a class="page-link" href="/about/">Hakkında</a>
				</li>
				
			
				
			
				
			
				
			
				
			
				
			

			<!-- Social icons from Font Awesome, if enabled -->
			


<li>
	<a href="mailto:mhmtbsl@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/pasali" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>







<li>
	<a href="https://www.linkedin.com/in/pasali" title="Follow on LinkedIn">
		<i class="fa fa-fw fa-linkedin"></i>
	</a>
</li>















<li>
	<a href="https://twitter.com/p4s4li" title="Follow on Twitter">
		<i class="fa fa-fw fa-twitter"></i>
	</a>
</li>





		</ul>
	</nav>
	
</header>


    <div class="content">
      <article >

  <header style="background-image: url('/')">
    <h1 class="title">Android - NetworkOnMainThreadException</h1>
    
    <p class="meta">
    January 29, 2014
    
    </p>
  </header>

  <section class="post-content">
    <p>Eğer network işlemleri yapan bir android uygulaması geliştiriyorsanız, büyük ihtimal ile yukarıda başlıkta yazdığım hata ile 
karşılaşmıssınızdır. &lt;!-- more --&gt;
Aslında internette çok küçük bir araştırma yaparak bu konu hakkında yazılmış sorulara ve verilen cevaplara ulaşabilirsiniz.</p>

<p>Ben biraz bu hata nedir ondan bahsedeyim. Kabaca ismine bakarsak, “ana threadte(iş parçasında) network işlemi yapıyorsun” diyor. Android işletim sistemini geliştiren abilerimiz buna izin vermemişler. Bu şekilde tasarlamalarının sebebi ise ağır işlerin ana threadte yapılmasının performansı düşürmesidir.</p>

<p>Peki bu hata nasıl çözülür? Temelde 3 yolu bulunmakta:</p>

<ul>
<li>StrictMode kullanarak Thread politikasını değiştirmek</li>
<li>Başka bir Thread oluşturmak</li>
<li>ASyncTask kullanmak</li>
</ul>

<p>Birinci yol pek tavsiye edilen bir çözüm değil. Nedenine gelirsek bunu yaparak basitçe şunu diyorsunuz “Ben, Android’i geliştiren abilerden daha iyi biliyorum. Ana threadte ağır işlemleri yaparsam performans kaybı olmaz.” Bu probleme kötü bir yaklaşım, uygulamanız inanılmaz derecede yavaş olursa benden günah gitti. :)</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">StrictMode</span><span class="o">.</span><span class="na">ThreadPolicy</span> <span class="n">policy</span> <span class="o">=</span> <span class="k">new</span>
<span class="n">StrictMode</span><span class="o">.</span><span class="na">ThreadPolicy</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">permitAll</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>

<span class="n">StrictMode</span><span class="o">.</span><span class="na">setThreadPolicy</span><span class="o">(</span><span class="n">policy</span><span class="o">);</span>
</code></pre></div>
<p>İkinci yol ise sıradan Thread kullanımı;</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Thread</span> <span class="n">networkIslemi</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nf">Runnable</span><span class="o">(){</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
           <span class="cm">/* Kodlarınız burada olacak */</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">});</span>
<span class="n">networkIslemi</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre></div>
<p>Üçüncü yol AsyncTask ise aslında android için özelleştrilmiş thread kullanımı diyebiliriz.
Normal threadlerden farklı olarak AsyncTask kullanarak işlemi aşama aşama takip edebilirsiniz.
İlereyen günlerde bu konu ile ilgili bir örnek yazmayı düşünüyorum. Şimdilik 
<a href="http://developer.android.com/reference/android/os/AsyncTask.html">burdan</a></p>

  </section>

  <!-- Disqus -->
  
  
</article>
    </div>

    
<footer class="site-footer">
	<p class="text">Powered by <a href="http://jekyllrb.com">Jekyll</a> with <a href="https://rohanchandra.github.io/project/type.html">Type Theme</a>
</p>
</footer>

  </body>
  
</html>
